<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <title>AlanCad - A toy matrix method cad program (Under Construction)</title>
        <script type="text/javascript" src="../js/three.js"></script>
        <script type="text/javascript" src="../js/OrbitControls.js"></script>
        <script type="text/javascript" src="../js/dat.gui.js"></script>

        <script type="text/javascript" src="../js/draw.js"></script>
        <script type="text/javascript" src="../js/dat_controller.js"></script>
        <script type="text/javascript" src="../js/structure.js"></script>
        <script type="text/javascript" src="../js/jquery-1.9.0.js"></script>

        <style>
            body{
                margin: 0;
                overflow: hidden;
            }
        </style>
    </head>

    <body>
        <!-- Div that holds output -->
        <div id="WebGL-output"> 
        </div>

        <!-- Javascript cd that runs -->
        <script charset="utf-8">
            var camera;
            var scene;
            var renderer;
            var draw;
            var structure;
            var datCont;

            function init() {
                scene = new THREE.Scene();

                // create a camera, which defines where we're looking at.
                camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);

                // create a render and set the size
                renderer = new THREE.WebGLRenderer();

                renderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.shadowMapEnabled = true;

                // position and point the camera to the center of the scene
                camera.position.x = -30;
                camera.position.y = 40;
                camera.position.z = 30;
                camera.lookAt(scene.position);

                var orbitControls = new THREE.OrbitControls(camera, renderer.domElement);

                // add the output of the renderer to the html element
                document.getElementById("WebGL-output").appendChild(renderer.domElement);

                // add subtle ambient lighting
                var ambientLight = new THREE.AmbientLight(0x0c0c0c);
                scene.add(ambientLight);

                // add spotlight for the shadows
                var spotLight = new THREE.SpotLight(0xffffff);
                spotLight.position.set(-40, 60, -10);
                spotLight.castShadow = true;
                scene.add(spotLight);

                structure = Structure();
                draw = Draw(scene, structure);                
                gui = new dat.GUI();
                datCont = DatController(gui, structure, draw);

                var clock = new THREE.Clock();
                function render() {
                    var delta = clock.getDelta();
                    orbitControls.update(delta);
                    requestAnimationFrame(render);

                    renderer.render(scene, camera);
                }
                render();
            }

           window.onload = init;
function onResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

        </script>
    </body>
</html>
